% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetch_SG2.R
\name{fetch_SG2}
\alias{fetch_SG2}
\title{Fetch SoilGrids v2 Data}
\usage{
fetch_SG2(
  aoi,
  properties,
  depths,
  output_dir = NULL,
  suffix = "",
  crs = "EPSG:4326",
  scale = 250,
  export = TRUE
)
}
\arguments{
\item{aoi}{SpatRaster, SpatVector, or file path to a shapefile. The area of interest.}

\item{properties}{Character vector. List of soil properties to download (e.g., `"clay"`, `"soc"`, `"phh2o"`).}

\item{depths}{Character vector. Soil depth intervals to download (e.g., `"0-5cm"`, `"5-15cm"`).}

\item{output_dir}{Character. Directory where files will be saved. Set to NULL to keep only in memory.}

\item{suffix}{Character. Optional suffix for file names.}

\item{crs}{Character. Coordinate reference system for the output. Default is `"EPSG:4326"`.}

\item{scale}{Numeric. Resolution in meters. Default is `250` (meters).}

\item{export}{Logical. If `TRUE`, saves downloaded rasters to `output_dir`. Default is `TRUE`.}
}
\value{
A list with the following elements:
\describe{
  \item{\code{stack}}{A `SpatRaster` containing all downloaded layers.}
  \item{\code{file_paths}}{A character vector of file paths (if `export = TRUE`).}
  \item{\code{product}}{A character string `"SG2"` identifying the dataset.}
}
}
\description{
Downloads and processes soil property data from SoilGrids v2, loading rasters into memory
while optionally saving them to disk.
}
\details{
This function interfaces with the SoilGrids v2 dataset hosted on Google Earth Engine (GEE)
and allows users to extract soil property maps for a given area of interest (AOI).
Users can specify depth intervals and properties of interest, and optionally save the data
to a specified directory.
}
\examples{
\dontrun{
# Authenticate and initialize Google Earth Engine
gd_authenticate(auth_mode = "notebook")
gd_initialize()

# Define AOI and fetch SG2 data
output_directory <- "path/to/your/directory"
aoi_raster <- rast("path_to_aoi.tif")

# Fetch SoilGrids data (without SOC conversion)
sg2_data <- fetch_SG2(
  aoi = aoi_raster,
  properties = c("phh2o", "soc"),
  depths = c("0-5cm", "5-15cm"),
  output_dir = output_directory,
  suffix = "example",
  crs = "EPSG:4326",
  scale = 250,
  export = TRUE,
  soctoperc = FALSE  # Keep SOC as g/kg
)

# Fetch SoilGrids data with SOC converted to percentage
sg2_data_perc <- fetch_SG2(
  aoi = aoi_raster,
  properties = c("soc"),
  depths = c("0-5cm", "30-60cm"),
  output_dir = output_directory,
  suffix = "perc",
  crs = "EPSG:4326",
  scale = 250,
  export = TRUE,
  soctoperc = TRUE  # Convert SOC from g/kg to \%
)

# Access the loaded SpatRaster
plot(sg2_data$stack)
}
}
